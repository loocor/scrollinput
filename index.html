<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Scrollbar</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://unpkg.com/smooth-scrollbar@latest/dist/smooth-scrollbar.css">
        <script src="https://unpkg.com/smooth-scrollbar@latest/dist/smooth-scrollbar.js"></script>
        <script src="https://unpkg.com/jquery@3.2.1"></script>
        <script src="jquery.svg.js"></script>
        <style>
            body {
                margin: 0;
                padding-top: 20px;
                text-align: center;
                user-select: none;
                outline: none;
            }

            #scrollbar {
                width: 300px;
                height: 200px;
                border-radius: 5px;
                margin-left: auto;
                margin-right: auto;
                outline: none;
            }

            #content {
                display: inline-block;
                overflow: hidden;
                padding: 0;
                margin: 0;
                width: 1300px;
                height: 100px;
                outline: none;
            }

            #size {
                font-family: HelveticaNeue-Light;
                font-size: 2em;
                position: relative;
                color: grey;
                margin-top: -10px;
                margin-bottom: -30px;
            }

            .cover {
                display: block;
                width: 100px;
                height: 100px;
                position: relative;
                margin-left: auto;
                margin-right: auto
            }

            .left {
                background-image: linear-gradient(-90deg, rgba(255, 255, 255, 0.00) 0%, #FFFFFF 100%);
                left: -100px;
                top: -200px;
            }

            .right {
                background-image: linear-gradient(-90deg, #FFFFFF 0%, rgba(255, 255, 255, 0.00) 100%);
                right: -100px;
                top: -300px;
            }

            #mark {
                height: 45px;
                width: 2px;
                display: block;
                background-color: red;
                position: relative;
                margin-left: auto;
                margin-right: auto;
                top: -370px;
            }
        </style>
    </head>

    <body>
        <p id="size">0</p>
        <div id="scrollbar">
            <div id="content"></div>
        </div>
        <div class="cover left"></div>
        <div class="cover right"></div>
        <div id="mark"></div>
    </body>

    <script>
        // 动态设计思路及核心参数
        //
        // @minValue: 指定输入最小值
        // @maxValue: 指定输入最大值
        // @metaValue: 指定输入精度，用于计算最低单元格
        // @majorStep: 主间隔单位，显示长线及数值
        // @minorStep: 次间隔单位，显示短线及数值
        // @scaleMode：flex, fixed 伸缩和固定
        //
        // 视觉要求（伸缩）：左右靠齐窗口两侧，随窗口伸缩实时更新尺寸，内部刻度、文字间隔对应变化；
        // 视觉效果（固定）：尺寸按照最小、最大以及精度值进行计算，窗口伸缩不影响输入框的尺寸；
        //
        // 实现途径：基于之前的参数由 jQ 生成包含数值的 div / li 区块，然后再通过 jQ 设置各自的样式；

        $(function () {
            // var scroller = $("#scrollbar");
            // var content = $("#content");
            // var config = {
            //     "minValue": minValue ? minValue : 0,
            //     "maxValue": maxValue ? maxValue : 100,
            //     "initValue": initValue ? initValue : 0,
            //     "metaValue": metaValue ? metaValue : 0.1,
            //     "majorStep": majorStep ? majorStep : 1,
            //     "minorStep": minorStep ? minorStep : 0.2,
            //     "scaleMode": scaleMode ? scaleMode : "fixed"
            // };

            $("#content").svg({
                "onLoad": drawIntro
            });

            function drawIntro(svg) {
                var g = svg.group({
                    "stroke": "gray",
                    "strokeWidth": 1
                });

                for (var i = 0; i < 1300; i = i + 5) {
                    if (i % 25 === 0) {
                        svg.line(g, i, 40, i, 75);
                    }

                    if (i % 50 === 0) {
                        svg.line(g, i, 30, i, 75);
                        svg.text(g, i - 4.5, 90, ((i - 150) / 10).toString(), {
                            "size": 9,
                            "fill": "#DDD",
                            "family": "ArialMT",
                            "stroke": "transparent"
                        });
                    }

                    svg.line(g, i, 50, i, 75);
                }
            }

            // 始化化滚动条
            var options = {
                "speed": 0.5,
                "overscrollEffect": "glow",
                "overscrollEffectColor": "#FFF"
            };

            var scrollbar = Scrollbar.init(document.getElementById("scrollbar"), options);
            scrollbar.limit.y = 0;
            scrollbar.addListener(function (status) {
                $(".scrollbar-track, .overscroll-glow").remove();
                $("#size").html(status.offset.x / 10);

                if (status.offset.x % 5 === 0) {
                    if (status.offset.x % 50 === 0) {
                        // $("#mark").height(45);
                    } else {
                        // $("#mark").height(20);
                    }
                    $("#mark").show();
                } else {
                    // $("#mark").hide();
                    // scrollbar.setPosition(status.offset.x + status.offset.x % 5, 0);
                }
                console.log(status.offset.x / 10);
            });

            scrollbar.setPosition(100, 0);
        });
    </script>

</html>